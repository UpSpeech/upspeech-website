<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta Tags -->
    <title>UpSpeech - AI-Powered Speech Therapy Support</title>
    <meta name="title" content="UpSpeech - AI-Powered Speech Therapy Support" />
    <meta
      name="description"
      content="Transform your speech therapy practice with AI-powered training between sessions. Help patients practice effectively and see better results."
    />
    <meta name="theme-color" content="#98A5FE" />
    <meta name="author" content="UpSpeech" />
    <meta
      name="keywords"
      content="speech therapy, AI therapy, speech improvement, stuttering, pronunciation, language learning"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://upspeech.app" />

    <!-- OpenGraph tags -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="UpSpeech - AI Speech Therapy" />
    <meta
      property="og:description"
      content="Transform your speech therapy practice with AI-powered training between sessions. Help patients practice effectively and see better results."
    />
    <meta
      property="og:image"
      content="https://upspeech.app/screenshots/desktop.jpg"
    />
    <meta
      property="og:image:secure_url"
      content="https://upspeech.app/screenshots/desktop.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:url" content="https://upspeech.app" />

    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="UpSpeech - AI Speech Therapy" />
    <meta
      name="twitter:description"
      content="Transform your speech therapy practice with AI-powered training between sessions. Help patients practice effectively and see better results."
    />
    <meta
      name="twitter:image"
      content="https://upspeech.app/screenshots/desktop.jpg"
    />

    <!-- Security -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' 'wasm-unsafe-eval' https://www.googletagmanager.com https://*.clarity.ms https://c.bing.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://images.unsplash.com https://upspeech.app https://c.bing.com https://*.clarity.ms; connect-src 'self' http://localhost:3000 https://app-backend-production-f30a.up.railway.app https://formspree.io https://api.emailjs.com https://*.google-analytics.com https://analytics.google.com https://*.clarity.ms https://c.bing.com; script-src-elem 'self' 'unsafe-inline' https://www.googletagmanager.com https://*.clarity.ms;"
    />
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" href="/favicon.png" sizes="32x32" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/icons/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/icons/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/icons/apple-touch-icon.png"
    />
    <meta name="msapplication-TileColor" content="#98A5FE" />

    <!-- Additional SEO -->
    <link rel="alternate" hreflang="en" href="https://upspeech.app" />

    <!-- Preconnect to required origins -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "WebSite",
            "@id": "https://upspeech.app/#website",
            "url": "https://upspeech.app/",
            "name": "UpSpeech",
            "description": "AI-Powered Speech Therapy Support - Transform your speech therapy practice with AI-powered training between sessions",
            "potentialAction": {
              "@type": "SearchAction",
              "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://upspeech.app/?q={search_term_string}"
              },
              "query-input": "required name=search_term_string"
            }
          },
          {
            "@type": "Organization",
            "@id": "https://upspeech.app/#organization",
            "name": "UpSpeech",
            "url": "https://upspeech.app/",
            "logo": {
              "@type": "ImageObject",
              "url": "https://upspeech.app/icons/apple-touch-icon.png"
            },
            "description": "UpSpeech provides AI-powered speech therapy support to help patients practice effectively between sessions and see better results."
          },
          {
            "@type": "SoftwareApplication",
            "name": "UpSpeech",
            "applicationCategory": "HealthApplication",
            "operatingSystem": "Web",
            "description": "AI-powered speech therapy support application that helps patients practice effectively between sessions and see better results",
            "url": "https://upspeech.app/",
            "screenshot": "https://upspeech.app/screenshots/desktop.jpg",
            "offers": {
              "@type": "Offer",
              "price": "0",
              "priceCurrency": "USD"
            },
            "audience": {
              "@type": "PeopleAudience",
              "audienceType": "Speech Therapists and Patients"
            },
            "featureList": [
              "AI-powered speech analysis",
              "Real-time feedback",
              "Progress tracking",
              "Between-session practice support",
              "Personalized therapy exercises"
            ]
          },
          {
            "@type": "WebPage",
            "@id": "https://upspeech.app/#webpage",
            "url": "https://upspeech.app/",
            "name": "UpSpeech - AI-Powered Speech Therapy Support",
            "isPartOf": {
              "@id": "https://upspeech.app/#website"
            },
            "about": {
              "@id": "https://upspeech.app/#organization"
            },
            "description": "Transform your speech therapy practice with AI-powered training between sessions. Help patients practice effectively and see better results.",
            "breadcrumb": {
              "@type": "BreadcrumbList",
              "itemListElement": [
                {
                  "@type": "ListItem",
                  "position": 1,
                  "name": "Home",
                  "item": "https://upspeech.app/"
                }
              ]
            }
          }
        ]
      }
    </script>

    <!-- Google Analytics 4 with Consent Mode v2 -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-MVPYYDVPZZ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }

      // 1. Determine default consent state based on localStorage
      let defaultConsent = {
        ad_storage: "denied",
        ad_user_data: "denied",
        ad_personalization: "denied",
        analytics_storage: "denied",
      };

      try {
        const stored = localStorage.getItem("upspeech_cookie_consent");
        if (stored) {
          const consentState = JSON.parse(stored);
          if (consentState.analytics) {
            defaultConsent.analytics_storage = "granted";
          }
          if (consentState.advertising) {
            defaultConsent.ad_storage = "granted";
            defaultConsent.ad_user_data = "granted";
            defaultConsent.ad_personalization = "granted";
          }
        }
      } catch (e) {
        // Ignore parsing errors
      }

      // 2. Set default consent state - BEFORE gtag config
      gtag("consent", "default", defaultConsent);

      // 3. Initialize GA4
      gtag("js", new Date());
      // Disable automatic page view measurement (handled by PageViewTracker)
      gtag("config", "G-MVPYYDVPZZ", { send_page_view: false });
    </script>

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "u8mslvrqv7");

      // Set Clarity consent state based on localStorage
      try {
        const stored = localStorage.getItem("upspeech_cookie_consent");
        if (stored) {
          const consentState = JSON.parse(stored);
          window.clarity("consentv2", {
            ad_Storage: consentState.advertising ? "granted" : "denied",
            analytics_Storage: consentState.analytics ? "granted" : "denied",
          });
        } else {
          // Default to denied if no consent stored
          window.clarity("consentv2", {
            ad_Storage: "denied",
            analytics_Storage: "denied",
          });
        }
      } catch (e) {
        // Default to denied on error
        window.clarity("consentv2", {
          ad_Storage: "denied",
          analytics_Storage: "denied",
        });
      }
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
